schemaVersion: v0.2
prepare:
  steps:
    - name: Install root
      command: nix-env -iA nixpkgs.uv
    - command: uv python install 3.10.0
    - command: cd mistral-client && uv sync
    - name: setup frontend
      command: cd frontend && yarn install
test:
  steps: []
run:
  mistral-client:
    steps:
      - command: cd mistral-client && uv run fastapi run src/client.py --host 0.0.0.0
          --port 3000
    plan: 8
    replicas: 1
    isPublic: true
    network:
      path: /assistant
      stripPath: false
  frontend:
    steps:
      - name: run frontend
        command: cd frontend && yarn start --host
    plan: 8
    replicas: 1
    isPublic: true
    network:
      path: /
      stripPath: true
